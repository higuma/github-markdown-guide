# 横線

[見出し]
← [目次] →
[表]

------------------------------------------------------------------------

上下のブロック構文の間に横線を引く。HTML要素の`<hr>`を出力する。

> [GitHub Flavored Markdown Spec](https://github.github.com/gfm/#thematic-breaks)では現在の[HTML仕様書](https://html.spec.whatwg.org/multipage/grouping-content.html#the-hr-element)内の表現と同じ**thematic breaks**という呼び名を用いている。しかし直訳の「テーマ区切り」ではあまりに堅苦しい。要素名`<hr>`は"horizontal rules"が由来であることから、訳語は平易に「横線」とした。

## 基本文法

単独の行に`-`, `*`, `_`のどれか一種類の文字の連続を用いる。文字数は3文字以上ならいくら長くてもよい。また前後に[空行]を入れることで誤認識を防止できる。

```markdown
パラグラフ1

------------------------------------------------------------------------

パラグラフ2

********************

パラグラフ3

________________________________________

パラグラフ4
```

> パラグラフ1
> 
> ------------------------------------------------------------------------
> 
> パラグラフ2
> 
> ********************
> 
> パラグラフ3
> 
> ________________________________________
> 
> パラグラフ4

> [GFM]仕様書には「多くの場合は[空行]不要」と書かれているが非推奨。[空行]を入れなくても認識するケースは確かにあるが、個別ケースをいちいち覚えても得るものは乏しい。それより「空行さえ入れておけば誤認識は発生しない」とだけ覚えておけばよい。

## 詳細仕様

> ここから先は実用性は乏しい([GFM]仕様のまとめだが、今ではもう無駄知識に近い)。興味がなければ読む必要なし。

[GFM]仕様では次の形式に該当する行が横線(`<hr>`)に変換される。

* 一行の中に`-`が3文字以上、または`_`が3文字以上、または`*`が3文字以上
    * 全て同種文字で、行中にスペース以外の別の文字があってはならない
* 先頭に3文字までインデント用スペース可
    * 4文字以上は[インデントによるコードブロック]と認識される)
* 中間と行末に任意個のスペースが挿入されていてもよい

次に示す例は(見かけは全然異なるが)すべて上記条件を満たしており横線に変換される。

`````markdown
---

* * * * * *

__  __  __  __

   ---
`````

> ---
> 
> * * * * * *
> 
> __  __  __  __
> 
>    ---

このような極めて緩やかな仕様になっているのは昔のテキスト記法を可能な限り寛大に受け付けて処理するため(後方互換対策)。どのように書いても同じ`<hr>`に変換されるのだから簡単な書き方だけ覚えておけば十分。

## 文法の認識

> ここから先は[GFM]仕様書を直接読もうと思っている人向けの解説。ただし読んでも得るものは少ないし、現在のGitHub Markdown実装は数々の機能拡張の結果、すでにGFM準拠ではなくなっている。興味がある人のみ推奨。

[GFM]仕様によれば(基本的に)前後の[空行]は不要で、次の文例(GFM仕様書の[Example 28])は前後の空行がなくても[パラグラフ]を上下に分割する。

```markdown
Foo
***
bar
```

> Foo
> ***
> bar

ただし横線を表す文字に`-`を使う場合は注意([Example 29])。

```markdown
Foo
---
bar
```

この場合は`Foo`が[Setext見出し]と認識されてしまい`<h2>`に変換される。

> Foo
> ---
> bar

前後に[空行]を入れればよい。

```markdown
Foo

---

bar
```

> Foo
> 
> ---
> 
> bar

このようにMarkdownの構文で[空行]が必要かどうかの判定条件は状況によって複雑に変化する。これらの条件をいちいち覚えるのは人間には面倒かつ退屈だが、単純に「インデントせず[空行]を常に入れる」と覚えておくだけで誤認識を防止できる。

### 他のMarkdown実装

またGFMでは[空行]不要のケースでも他のMarkdown実装では必要なものが多い。例として上に示した[Example 28]をBabelmarkで確認した結果を示す。

* Example 28 (空行なし) → https://babelmark.github.io/?text=Foo%0A***%0Abar
* 前後に空行を挿入 → https://babelmark.github.io/?text=Foo%0A%0A***%0A%0Abar

[空行]なしの場合は横線と認識しないMarkdown実装が多数ある(特に[Jupyter notebook]などに用いられる[Pandoc]が認識しないことに注目)。これに対し前後に[空行]を入れれば主要Markdown実装は問題なく横線と認識する。

このように前後の[空行]を入れておくことが可搬性の高い記述を行うことにもつながる(具体的にはGitHub用に作成したMarkdown文章をそのまま[Jupyter notebook]にコピーペーストできる)。[空行]が不要な場合は単に無視されるため(無害)、[空行]挿入は効果的なトラブルの未然防止策になる。

------------------------------------------------------------------------

[見出し]
← [目次] →
[表]

[Example 28]: https://higuma.github.io/github-markdown-guide/gfm/#example-28
[Example 29]: https://higuma.github.io/github-markdown-guide/gfm/#example-29
[GFM]: github-flavored-markdown.md
[Jupyter Notebook]: https://jupyter.org/
[Pandoc]: https://pandoc.org/
[Setext見出し]: headings.md#Setext見出し
[インデントによるコードブロック]: code-blocks.md#インデントによるコードブロック
[パラグラフ]: paragraphs.md
[空行]: characters.md#空行
[表]: tables.md
[見出し]: headings.md
[目次]: index.md

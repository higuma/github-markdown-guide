# [6.12 ハード改行](https://higuma.github.io/github-markdown-guide/gfm/#hard-line-breaks)

[6.11 使用できないHTML要素](disallowed-html-elements.md)
← [目次](index.md) →
[6.13 ソフト改行](soft-line-breaks.md)

------------------------------------------------------------------------

> **旧版(完成後削除)**

[インライン]構文の行末に改行を入れる書式をハード改行(hard line breaks)という。

## ベストプラクティス

行末に`\`を用いる。

```markdown
行末で改行\
次の行
```

> 行末で改行\
> 次の行

なお行末に2個以上のスペース文字がある場合もハード改行と認識する。しかしこの方法は作業時の認識性に問題があり、編集中のテキストを見ただけでは判別が難しい(非推奨)。

## まとめ

[空行]ではない連続する[インライン]構文行に対し、次の条件を満たす場合をハード改行と判定する。

* 最初の行の行末が次のいずれかで終わる
    * スペース2個以上
    * バックスラッシュ(`\`)
* 次の行が[空行]ではなく、また別のブロック構文でもない

行末のスペースまたはバックスラッシュを除去してから`<br>`を挿入し改行する(ただし同一パラグラフ内部の改行として扱う)。また次行の先頭にある空白(の連続)は除去される。

## 文例

### 基本例

次の通り。なお行末スペースは外見では区別困難なのでその手前に文章として示した。

```markdown
行末スペース2個 →  
行末スペース10個 →          
行末バックスラッシュ → \
次の行
```

> 行末スペース2個 →  
> 行末スペース10個 →          
> 行末バックスラッシュ → \
> 次の行

### 次行の先頭空白除去

ハード改行の次行の先頭にスペースがある場合は除去される。

```markdown
行末スペース2個 →  
   行末スペース10個 →          
       行末バックスラッシュ → \
           次の行
```

> 行末スペース2個 →  
>    行末スペース10個 →          
>        行末バックスラッシュ → \
>            次の行

### 次行の構文認識

構文解析はインラインよりブロックを優先するため、次の行が[空行]の場合は以降を次のブロック構文と認識する。次の例では2行目がハード改行ではないため行末の`\`が除去されずに表示される。

```markdown
ハード改行\
次は空行(ハード改行ではない)\

次のパラグラフ
```

> ハード改行\
> 次は空行(ハード改行ではない)\
> 
> 次のパラグラフ

直後に別のブロック構文がある場合も同様。

``````markdown
ハード改行\
次は別のブロック構文(ハード改行ではない)\
| 表 |
| - |
| セル |

ハード改行\
次は別のブロック構文(ハード改行ではない)\
> 引用

ハード改行\
次は別のブロック構文(ハード改行ではない)\
- リスト
``````

> ハード改行\
> 次は別のブロック構文(ハード改行ではない)\
> | 表 |
> | - |
> | セル |
> 
> ハード改行\
> 次は別のブロック構文(ハード改行ではない)\
> > 引用
> 
> ハード改行\
> 次は別のブロック構文(ハード改行ではない)\
> - リスト

### 書式設定

[斜体と太字]、[打ち消し線]、[生HTML]を用いた書式設定の間にハード改行を挿入してよい。

```markdown
Plain _italic\
**bold\
italic\
~~also\
strikethrough~~**_ plain.

<u>下線付き\
次行も下線付き</u>
```

> Plain _italic\
> **bold\
> italic\
> ~~also\
> strikethrough~~**_ plain.
> 
> <u>下線付き\
> 次行も下線付き</u>

ただし[コードスパン]には効かず、単に行連結する。

```markdown
`This line ends with two spaces →  
rest of code span`

`This line ends with a backslash → \
rest of code span`
```

> `This line ends with two spaces →  
> rest of code span`
> 
> `This line ends with a backslash → \
> rest of code span`

------------------------------------------------------------------------

[6.11 使用できないHTML要素](disallowed-html-elements.md)
← [目次](index.md) →
[6.13 ソフト改行](soft-line-breaks.md)

[インライン]: inlines.md
[コードスパン]: code-spans.md
[ソフト改行]: soft-line-breaks.md
[打ち消し線]: strikethrough.md
[空行]: blank-lines.md
[斜体と太字]: bold-and-italic.md
[生HTML]: raw-html.md

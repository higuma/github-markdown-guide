# [4.1 横線](https://higuma.github.io/github-markdown-guide/gfm/#thematic-breaks)

[4 葉ブロック](leaf-blocks.md)
← [目次](index.md) →
[4.2 見出し](headings.md)

------------------------------------------------------------------------

上下のブロック構文の間に横線を引く。HTML要素の`<hr>`を出力する。

## ベストプラクティス

* `---------`のように明確に判別できる十分な長さのハイフンを用いる(3文字以上、スペースなし)
* 前後に[空行]を入れる(誤認識対策)

```markdown
パラグラフ(1)

------------------------------------------------------------------------

パラグラフ(2)
```

> パラグラフ(1)
> 
> ------------------------------------------------------------------------
> 
> パラグラフ(2)

## まとめ

> 詳細仕様解説だが覚えても実用性は乏しい。興味がなければ読む必要なし。

GFM仕様では次の形式に該当する行が横線(`<hr>`)に変換される。

* `-`が3文字以上、または``_``が3文字以上、または``*``が3文字以上
    * 全て同種文字で、行中にスペース以外の別の文字があってはならない
* 先頭に3文字までインデント用スペース可(4文字以上は[インデント式コードブロック]と認識される)
* 中間と行末に任意個のスペースが挿入されていてもよい

次に示す例は(見かけは全然異なるが)すべて上記条件を満たしており横線に変換される。

```markdown
---

____

* * * * *

   ---
```

> ---
> 
> ____
> 
> * * * * *
> 
>    ---

> このような極めて緩やかな仕様になっているのは昔のテキスト記法を可能な限り寛大に受け付けて処理するため(後方互換対策)。どれを用いてもよいが今では逆にすべて覚える必要はない。1種類(例えば上に示した[ベストプラクティス](#ベストプラクティス)だけ)覚えておけば十分。

## 文例

### 空行の必要性

GFM仕様によれば(基本的に)前後の[空行]は不要で、次の文例(GFM仕様書の[Example 28])は前後の空行がなくても[パラグラフ]を上下に分割する。

```markdown
Foo
***
bar
```

> Foo
> ***
> bar

ただし横線を表す文字に`-`を使う場合は注意([Example 29])。

```markdown
Foo
---
bar
```

この場合は`Foo`が[Setext見出し]と認識されてしまい`<h2>`に変換される。

> Foo
> ---
> bar

前後に[空行]を入れればよい。

```markdown
Foo

---

bar
```

> Foo
> 
> ---
> 
> bar

このようにMarkdownの構文で[空行]が必要かどうかの判定条件は状況によって複雑に変化する。これらの条件を全て調べ尽くして覚えるのは人間にはあまりに過酷かつ退屈だが、より単純に「分からない場合は[空行]を入れておく」と覚えておけばほぼ意図通りに対応できる。

> 詳しくは[空行]の文例で解説する。

またGFMでは[空行]不要のケースでも他のMarkdown実装では必要なものが多い。例として上に示した[Example 28]をBabelmarkで確認した結果を示す。

* Example 28 (空行なし) → https://babelmark.github.io/?text=Foo%0A***%0Abar
* 前後に空行を挿入 → https://babelmark.github.io/?text=Foo%0A%0A***%0A%0Abar

[空行]なしの場合は横線と認識しないMarkdown実装が多数ある(特に[Jupyter notebook]などに用いられる[Pandoc]が認識しないことに注目)。これに対し前後に[空行]を入れれば主要Markdown実装は問題なく横線と認識する。

このように前後の[空行]を入れておくことが可搬性の高い記述を行うことにもつながる(具体的にはGitHub用に作成したMarkdown文章をそのまま[Jupyter notebook]にコピーペーストできる)。[空行]が不要な場合は単に無視されるため(無害)、[空行]挿入は効果的なトラブルの未然防止策になる。

> Markdownではこれ以外にも[空行]がブロック構文の区切りとして重要な役割を担う。詳しくは[空行]で解説する。

------------------------------------------------------------------------

[4 葉ブロック](leaf-blocks.md)
← [目次](index.md) →
[4.2 見出し](headings.md)

[Example 28]: https://higuma.github.io/github-markdown-guide/gfm/#example-28
[Example 29]: https://higuma.github.io/github-markdown-guide/gfm/#example-29
[Jupyter Notebook]: https://jupyter.org/
[Pandoc]: https://pandoc.org/
[Setext見出し]: setext-headings.md
[インデント式コードブロック]: indented-code-blocks.md
[パラグラフ]: paragraphs.md
[空行]: blank-lines.md

# パラグラフ

[ブロック]
← [目次] →
[見出し]

------------------------------------------------------------------------

## 基本的な書き方

パラグラフはMarkdownのデフォルト構文で、[インライン]アイテムを連続して記述した行は全体がひとつのパラグラフとして扱われる。

```markdown
通常テキスト、**太字**、~~取り消し~~、[リンク](#)
```

> 通常テキスト、**太字**、~~取り消し~~、[リンク](#)

連続する2つのパラグラフの間は[空行]で区切る。

```markdown
パラグラフ1

パラグラフ2
```

> パラグラフ1
> 
> パラグラフ2

## 行の連結

間に空行のない連続したパラグラフ行はスペース1個を挟んで連結し、同じパラグラフとして扱われる。この仕様は[<span id="ソフト改行">**ソフト改行**</span>](https://github.github.com/gfm/#soft-line-breaks) (soft line breaks)と呼ばれる。

```markdown
パラグラフ1
パラグラフ1の続き

パラグラフ2
```

> パラグラフ1
> パラグラフ1の続き
> 
> パラグラフ2

> &#x2757;&#xFE0F; **注意**: ただしGitHub以外のWeb環境の中にはこのルールが適用されず、通常のテキスト文章と同じように改行(`<br>`)を挿入するものも多い([Qiita]など)。Markdownは実装により詳細仕様が異なることが多いため、常に実環境上でのチェックが必要。

### 日本語の扱い

Markdownのパラグラフはもともと英語など単語をスペースで区切る言語を想定しており、任意の単語区切りスペースで改行できるようにできている(HTMLも同様)。しかしこれは単語をスペースで区切らない言語(特に日本語)との相性が悪い。

例えば日本語の文章を32文字(全角16文字)で[ソフト改行]した次のパラグラフを考える。

```markdown
いづれの御時にか、女御、更衣あま
たさぶらひたまひけるなかに、いと
やむごとなき際にはあらぬが、すぐ
れて時めきたまふありけり。
```

しかしこれでは改行部分のHTML出力に通常の日本語文にはない半角スペースが入ってしまう。

> いづれの御時にか、女御、更衣あま
> たさぶらひたまひけるなかに、いと
> やむごとなき際にはあらぬが、すぐ
> れて時めきたまふありけり。

日本語らしく間を開けずに表示するには編集時に全部一行につなげて記述する以外に方法はない。

```markdown
いづれの御時にか、女御、更衣あまたさぶらひたまひけるなかに、いとやむごとなき際にはあらぬが、すぐれて時めきたまふありけり。
```

> いづれの御時にか、女御、更衣あまたさぶらひたまひけるなかに、いとやむごとなき際にはあらぬが、すぐれて時めきたまふありけり。

## 改行の挿入

Markdownのパラグラフ内に改行を挿入する場合はバックスラッシュを記述し、その直後で改行する。この仕様は[<span id="ハード改行">**ハード改行**</span>](https://github.github.com/gfm/#hard-line-breaks) (hard line breaks)と呼ばれるもので、HTML出力時に`<br>`が挿入される。

```markdown
ここはソフト改行
ここはハード改行\
改行後だがまだ同じパラグラフ

次のパラグラフ
```

> ここはソフト改行
> ここはハード改行\
> 改行後だがまだ同じパラグラフ
> 
> 次のパラグラフ

より直接的に[HTMLインライン]を用いて`<br>`を挿入してもよい。

```markdown
ABDEFG<br>HIJKLM
```

> ABDEFG<br>HIJKLM

> <details>
> <summary>&#x1F6AB; もう一つのハード改行(<strong>非推奨</strong>だが知っておくべき)</summary>
> 
> 上記とは別にパラグラフの途中に改行を入れる手段として「行の末尾にスペースを2文字以上入れる」という方法がある。実例は次の通り。行末スペースは目に見えないが、ブラウザ上でテキストをマウスで選択すると個数を確認できる。
> 
> ```markdown
> 行末にスペースなし→
> 行末にスペース1個→ 
> 行末にスペース2個→  
> 行末にスペース3個→   
> (以下同様)
> ```
> 
> > 行末にスペースなし→
> > 行末にスペース1個→ 
> > 行末にスペース2個→  
> > 行末にスペース3個→   
> > (以下同様)
> 
> しかしこの方法はソーステキストの見た目だけではどちらなのか判別が難しく、ドキュメント作成者の意図と異なる振る舞いの原因になりやすい(非推奨)。
> 
> > &#x26A0;&#xFE0F; 典型的なトラブルとして行末にスペースが残っているのに気づかず、「ソフト改行で行連結するはずなのになぜ改行するんだろう」と悩む場合が多い。そういう場合は行末にスペースが残っているかどうか確認するとよい。
> </details>

## バックスラッシュエスケープ

パラグラフを構成する行の先頭に他のブロック構文と認識される文字列パターンがある場合は該当部分の先頭[ASCII句読文字]に[バックスラッシュエスケープ]を用いて認識させる。

```markdown
\----------
前の行は水平線ではない
\### 見出しではない
\- リストではない
10\. これもリストではない
```

> \----------
> 前の行は水平線ではない
> \### 見出しではない
> \- リストではない
> 10\. これもリストではない

## 文法認識

### 確実な認識方法

パラグラフの誤認識を防止するには次の通りにすればよい。

- 前後に[空行]を入れる
- 行頭に他のMarkdown構文と一致するパターンがある場合に[バックスラッシュエスケープ]を用いる
- 行頭にインデント用のスペースを入れない

> &#x2714;&#xFE0F; これ以降は細かい文法仕様の解説で、**文書作成の習得が目的の人は読む必要なし**。知らなくても実用的なMarkdown文書作成に支障はなく、通常は上記3項目さえ覚えておけば十分。ただし誤認識が発生した場合のトラブルシューティング用としての価値はあるので知っておいて損はない。

### 行頭スペースの除去

先頭行にはインデントスペース3つまで使用可能で、これらは除去して処理される。4つ以上は[インデントによるコードブロック]と認識される。

```markdown
パラグラフ1

 パラグラフ2

  パラグラフ3

   パラグラフ4

    コードブロック
```

> パラグラフ1
> 
>  パラグラフ2
> 
>   パラグラフ3
> 
>    パラグラフ4
> 
>     コードブロック

先頭行をパラグラフと認識すると、次行以降は先頭の空白を除去してから処理する。次の文例では2行目以降は行頭空白を除した後、前の行から[ソフト改行]した継続行としてHTMLレンダリング時に連結される。

```markdown
パラグラフ先頭行
     2行目
  3行目
          4行目
```

> パラグラフ先頭行
>      2行目
>   3行目
>           4行目

### 直前構文に対する文法認識

直前が[水平線]、[見出し]の場合は[空行]不要。

```markdown
------------------------------------------------------------------------
パラグラフ

### 見出し
パラグラフ
```

> ------------------------------------------------------------------------
> パラグラフ
> 
> ### 見出し
> パラグラフ

[表]には[空行]が必要。

```markdown
| 表 |
| - |
| セル |
これもセル

| 表 |
| - |
| セル |

パラグラフ
```

> | 表 |
> | - |
> | セル |
> これもセル
> 
> | 表 |
> | - |
> | セル |
> 
> パラグラフ

直前が[ブロック引用]、[リスト]の場合も[空行]が必要。

```markdown
> ブロック引用
ブロック引用の継続(パラグラフではない)

> ブロック引用

パラグラフ

- リスト
リストの継続(パラグラフではない)

- リスト

パラグラフ
```

> > ブロック引用
> ブロック引用の継続(パラグラフではない)
> 
> > 引用
> 
> パラグラフ
> 
> - リスト
> リストの継続(パラグラフではない)
> 
> - リスト
> 
> パラグラフ

さらにリストの場合は[空行]の後にインデント付きパラグラフを記述するとリスト項目のインデントと認識され、その内部のパラグラフとして扱われる。

```
- リスト項目

  上記リスト項目内のパラグラフ
```

> - リスト項目
> 
>   上記リスト項目内のパラグラフ

以上の振る舞いは複雑な上、知っていても何の役にも立たない(Markdown実装者以外には不要な知識)。文書作成時にパラグラフとして確実に認識させるには次の2点だけ覚えておくとよい。

- 前後に[空行]を入れる
- 行頭インデントを用いない

### 直後構文に対する文法認識

次行が[空行]の場合はパラグラフ終了で、以降を次のブロック構文と認識する。

```markdown
このパラグラフ行は継続(ソフト改行して次行と連結)
このパラグラフ行で終了(直後が空行)

次のパラグラフ
```

> このパラグラフ行は継続(ソフト改行して次行と連結)
> このパラグラフ行で終了(直後が空行)
> 
> 次のパラグラフ

直後に他のブロック構文がある場合、GitHubのMarkdown実装では次のケースで間に[空行]不要。

``````markdown
このパラグラフ行で終了(直後がブロック構文)
```
コードブロック
```

このパラグラフ行で終了(直後がブロック構文)
> 引用

このパラグラフ行で終了(直後がブロック構文)
- リスト
``````

> このパラグラフ行で終了(直後がブロック構文)
> ```
> コードブロック
> ```
> 
> このパラグラフ行で終了(直後がブロック構文)
> > 引用
> 
> このパラグラフ行で終了(直後がブロック構文)
> - リスト

ただし[空行]を入れた方が作業時に認識しやすいという利点はある。さらに他のMarkdown実装には[空行]が必要なものが多い。[空行]が必要かどうかでいちいち悩むより「[空行]は必ず入れる」とだけ覚えておく方が実践的に役立つ。

> <details>
> <summary>&#x2714;&#xFE0F; <strong>参考</strong>: 他のMarkdown実装との仕様比較</summary>
> 
> 次の文例を考える(間に[空行]なし)。
> 
> ```markdown
> Paragraph
> - List
> ```
> 
> Babelmarkの確認結果は次の通り。`- List`を[リスト]ではなくパラグラフの続きと認識する実装が多数ある。
> 
> https://babelmark.github.io/?text=Paragraph%0A-+List
> 
> 次に改行を入れる。
> 
> ```markdown
> Paragraph
> 
> - List
> ```
> 
> 結果は次の通り。今後は全実装が[リスト]と認識する。
> 
> https://babelmark.github.io/?text=Paragraph%0A%0A-+List
> 
> このように[空行]の挿入は可搬性の観点で大きな効果がある。[空行]不要なMarkdown実装は単に[空行]を無視するだけで無害なので、やはり間に[空行]を入れることを強く推奨する。
> </details>

------------------------------------------------------------------------

[ブロック]
← [目次] →
[見出し]

[ASCII句読文字]: backslash-escapes.md#ASCII句読文字
[GitHub Flavored Markdown]: gitHub-flavored-markdown.md
[HTMLインライン]: html-inlines.md
[Qiita]: https://qiita.com/
[インデントによるコードブロック]: code-blocks.md#インデントによるコードブロック
[インライン]: inlines.md
[ソフト改行]: #ソフト改行
[バックスラッシュエスケープ]: characters.md#バックスラッシュエスケープ
[ブロック]: blocks.md
[ブロック引用]: block-quotes.md
[リスト]: lists.md
[空行]: characters.md#空行
[表]: tables.md
[見出し]: headings.md
[目次]: index.md
[水平線]: thematic-breaks.md

# [4.10 表](https://higuma.github.io/github-markdown-guide/gfm/#tables-extension-)

[4.9 空行](blank-lines.md)
← [目次](index.md) →
[5 コンテナブロック](container-blocks.md)

------------------------------------------------------------------------

[GFM]仕様では表を記述できる。HTMLの[`<table>`](https://developer.mozilla.org/ja/docs/Web/HTML/Element/table)を作成し、その内側に表の内部要素([`thead`](https://developer.mozilla.org/ja/docs/Web/HTML/Element/thead), [`tbody`](https://developer.mozilla.org/ja/docs/Web/HTML/Element/tbody), [`tr`](https://developer.mozilla.org/ja/docs/Web/HTML/Element/tr), [`th`](https://developer.mozilla.org/ja/docs/Web/HTML/Element/th), [`td`](https://developer.mozilla.org/ja/docs/Web/HTML/Element/td))を生成する。

## ベストプラクティス

### 基本形

* 1行目は見出し行(太字表示)
* 2行目は区切り行(セル内部は`-`を1個以上連続)
* 3行目以降はデータ行(通常表示)
* セルは左右を`|`で区切る

```markdown
| 見出し1 | 見出し2 |
| - | - |
| データ1-1 | データ1-2 |
| データ2-1 | データ2-2 |
```

> | 見出し1 | 見出し2 |
> | - | - |
> | データ1-1 | データ1-2 |
> | データ2-1 | データ2-2 |

### 左右寄せ

列の左右寄せを区切り行セルで設定できる(`-`は1個以上連続)。

* `-` - 標準(見出しは中央寄せ、データは左寄せ)
* `:-` - 左寄せ
* `:-:` - 中央寄せ
* `-:` - 右寄せ

```markdown
| 標準 | 右寄せ | 中央寄せ | 左寄せ |
| - | :- | :-: | -: |
| あいうえお | かきくけこ | さしすせそ | たちつてと |
| 1 | 2 | 3 | 4 |
```

| 標準 | 右寄せ | 中央寄せ | 左寄せ |
| - | :- | :-: | -: |
| あいうえお | かきくけこ | さしすせそ | たちつてと |
| 1 | 2 | 3 | 4 |

### セルの記述

* ヘッダ行とデータ行のセル内に任意の[インライン]構文を記述可(空セルも可)
* セル内に`|`を含む場合は[バックスラッシュエスケープ]して`\|`

```markdown
| A | B | C |
| - | - | - |
| _abc_ | __abc__ | ~~abc~~ |
| [link](#) | https://example.com/ | :soccer: :baseball: |
| \|<var>x</var>\| + <var>y</var><sup>2</sup> | | `(0..9).each {\|n\| p n}` |
```

> | A | B | C |
> | - | - | - |
> | _abc_ | __abc__ | ~~abc~~ |
> | [link](#) | https://example.com/ | :soccer: :baseball: |
> | \|<var>x</var>\| + <var>y</var><sup>2</sup> | | `(0..9).each {\|n\| p n}` |

> 上記文例の`:soccer:`,`:baseball:`は[絵文字]\(GitHub専用)。

## まとめ

仕様は次の通り。詳しくは次の[文例](#文例)で説明する。

* 1行目はヘッダ行(header row)、2行目は区切り行([delimiter row](https://higuma.github.io/github-markdown-guide/gfm/#delimiter-row))、3行目以降がデータ行(data row)
* ヘッダ行と区切り行は必須、データ行なしの場合はヘッダ部だけ生成
* セル間の区切りは`|`、前後の空白は削除して処理
* 区切り行セルは`-`(標準), `:-`(左寄せ), `-:`(右寄せ), `:-:`(中央寄せ)の4通り(`-`は1個以上連続)
* ヘッダ行と区切り行のセル数が等しくないと表として認識しない
* データ行のセル数は等しくなくてよい
    * ヘッダ/区切り行のセル数より足りない場合は後ろに空セルを追加
    * 多い場合は除去
* 行頭と行末に`|`は原則不要、ただし先頭が空セルの場合は必須
* ヘッダ行とデータ行のセル内に任意の[インライン]構文を記述可
    * 内部の`|`は[バックスラッシュエスケープ]して`\|`([コードスパン]内にも必要)
* 表の文法認識は前後の構文により変化するので注意([後述](#表の認識前後構文との関係))

## 文例

### テキスト文書の整形

テキスト表示の整形は全く影響しない。次の2つは同一出力になる。

```markdown
|  one  |  two  |
| ----- | ----- |
| three | four  |

| one | two |
| - | - |
| three | four |
```

> |  one  |  two  |
> | ----- | ----- |
> | three | four  |
> 
> | one | two |
> | - | - |
> | three | four |

揃えた方が編集作業中の見栄えがよく認識性も優れているが出力に違いはない。無理に整形する必要はないので作業の手間も考え状況に応じて判断すればよい。

### データ行の省略

データ行なしも可能。この場合はヘッダ部だけ生成する。

```markdown
| ヘッダ1 | ヘッダ2 |
| - | - |
```

> | ヘッダ1 | ヘッダ2 |
> | - | - |

### 行ごとのセル個数

ヘッダ行と区切り行のセル数が等しくないと表として認識しない。

```markdown
| これは | 表 |
| - | - |
| A | B |

| これは | 表ではない |
| - |
| A | B |

| これも | 表ではない |
| - | - | - |
| A | B |
```

> | これは | 表 |
> | - | - |
> | A | B |
> 
> | これは | 表ではない |
> | - |
> | A | B |
> 
> | これも | 表ではない |
> | - | - | - |
> | A | B |

データ行のセル数は一致していなくてもよい。足りない場合は後ろに空セルを追加、多い場合は除去して生成する。

```markdown
| A | B |
| - | - |
| C |
| X | Y | Z |
```

> | A | B |
> | - | - |
> | C |
> | X | Y | Z |

### 行頭・行末の`|`

行頭と行末の`|`はなくても認識する。

```markdown
A | B
-- | --
A1 | B1
```

> A | B
> -- | --
> A1 | B1

> この場合は区切り行の先頭セルは`-`が2個以上必要。`- | -`と書くとGitHub実装では行頭の`- `を検出して[リストアイテム]と判定する場合がある(Markdown処理系により異なる)。

ただし先頭が空セルの場合は認識されない。次は失敗例で、データ行先頭のスペース3つは単に除去されてセルとして認識されない。

```markdown
A  | B
-- | --
   | B1
```

> A  | B
> -- | --
>    | B1

またスペース4つ以上は[インデント式コードブロック]と認識されてしまう。

```markdown
 A  |  B
--- | ---
    | B1
```

>  A  |  B
> --- | ---
>     | B1

またヘッダ行の最後が空セルの場合も行末に`|`が必要。次は表として認識されない。

```markdown
| A | B |
| - | - | -
| 1 | 2 | 3
```

> | A | B |
> | - | - | -
> | 1 | 2 | 3

行末に`|`を追加すれば認識する。

```markdown
| A | B | |
| - | - | -
| 1 | 2 | 3
```

> | A | B | |
> | - | - | -
> | 1 | 2 | 3

「行頭と行末に(もし不要でもマナーとして)`|`を入れる」と覚えておけばこのような間違いを未然に防ぐことができる(推奨)。

### セル前後の空白

セル区切りの`|`とセルの中身の間の空白は処理時に除去される。記述としては空白は不要だが、作業時の認識性を考慮すると入れた方が間違いが少ない。例えば次の文例は正しいが非常に判別しにくい。

```markdown
a|b
-|-
\|<var>p</var>\||\|<var>q</var>\|
```

> a|b
> -|-
> \|<var>p</var>\||\|<var>q</var>\|

スペースを入れるだけで認識性は格段に向上する。行頭/行末の`|`も入れるとなおよい。

```markdown
| a | b |
| - | - |
| \|<var>p</var>\| | \|<var>q</var>\| |
```

> | a | b |
> | - | - |
> | \|<var>p</var>\| | \|<var>q</var>\| |

### 表の認識(前後構文との関係)

表の手前には[空行]を入れておけば大部分のケースで正しく認識する。しかし[リスト]の直後に表を記述する場合は注意。次は(意図的に作成した)失敗例で、ヘッダ行ではなく[リストアイテム]の続きと認識される。

```markdown
* リストアイテム
  A   |   B
----- | -----
12345 | 67890
```

> * リストアイテム
>   A   |   B
> ----- | -----
> 12345 | 67890

[空行]を入れても解決しない。(表を整形したのが仇となり)[リストアイテム]内のインデントと認識される。

```markdown
* リストアイテム

  A   |   B
----- | -----
12345 | 67890
```

> * リストアイテム
> 
>   A   |   B
> ----- | -----
> 12345 | 67890

さらにヘッダ行の先頭に`|`を用いてやっと認識する([空行]と両方必要)。このように行頭の`|`は構文認識の点でも大きな効果がある。

```markdown
* リストアイテム

|   A   |   B
| ----- | -----
| 12345 | 67890
```

> * リストアイテム
> 
> |   A   |   B
> | ----- | -----
> | 12345 | 67890

表の直後のブロック構文との判別にも注意。直後が[コンテナブロック]構文であれば[空行]不要。

```markdown
| A | B |
| - | - |
| X | y |
> 引用

| A | B |
| - | - |
| X | y |
* リスト
```

> | A | B |
> | - | - |
> | X | y |
> > 引用
> 
> | A | B |
> | - | - |
> | X | y |
> * リスト

> [コンテナブロック]の方が[葉ブロック]より構文解析の優先度が高い。表は[葉ブロック]扱いのため、表の構文解析中に[コンテナブロック]の行パターンを検出するとそこで終了と判定する。

しかし[葉ブロック]ではそうはいかない。間を開けずにすぐ文を書くとセルと認識されてしまう。

```markdown
| A | B |
| - | - |
| X | y |
パラグラフではない
```

> | A | B |
> | - | - |
> | X | y |
> パラグラフではない

この場合は[空行]で区切れば認識する。

```markdown
| A | B |
| - | - |
| X | y |

パラグラフ
```

> | A | B |
> | - | - |
> | X | y |
> 
> パラグラフ

こういうことをいちいち覚えるよりも、より実用的・実践的に「表の後には[空行]が必要」と覚えておくと分かりやすい。行頭の`|`も同様で、この2点を押さえておけばまず間違いは起きない。

------------------------------------------------------------------------

[4.9 空行](blank-lines.md)
← [目次](index.md) →
[5 コンテナブロック](container-blocks.md)

[GFM]: introduction.md#11-github-flavored-markdownとは
[インデント式コードブロック]: indented-code-blocks.md
[インライン]: inlines.md
[コードスパン]: code-spans.md
[コンテナブロック]: container-blocks.md
[バックスラッシュエスケープ]: backslash-escapes.md
[リスト]: lists.md
[リストアイテム]: list-items.md
[絵文字]: github-markdown.md#絵文字
[空行]: blank-lines.md
[葉ブロック]: leaf-blocks.md
